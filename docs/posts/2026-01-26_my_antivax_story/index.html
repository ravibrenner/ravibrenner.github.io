<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ravi Brenner">
<meta name="dcterms.date" content="2026-01-28">

<title>My Vaccine Story – Ravi Brenner</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-f93c2b1f3f0577f377aefa4848a86a36.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Ravi Brenner</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume.html"> 
<span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">My Vaccine Story</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">general</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Ravi Brenner </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 28, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="fear-of-needles" class="level1">
<h1>Fear of needles</h1>
<p>When I was 17, I drove myself to the pediatrician for the first time, without my parents. After most of the physical exam had concluded, my doctor asked me if I wanted to get the relatively new meningococcal B vaccine. The CDC had recently recommended MenB vaccine for “<a href="https://www.cdc.gov/mmwr/preview/mmwrhtml/mm6441a3.htm">individual clinical decision making</a>.” I was at the right age to receive the vaccine, and there was a low but meaningful risk of the disease on college campuses at the time.</p>
<p>I was and remain terrified of needles (like <a href="https://pubmed.ncbi.nlm.nih.gov/36409734/">over half of adults</a>). My pediatrician knew this, since I had nearly passed out in his office a few years prior. The vaccine was new, and based on the relatively weak recommendation from the CDC ACIP, he told me: “You can probably skip this one.” With no parents there to tell me otherwise, that’s exactly what I did.</p>
<p>I diligently, if nervously, got all my flu shots in college. I even took myself to get a Tdap booster, after which I nearly fainted and had to lie down with a juice box at age 22. I jumped at the opportunity to get the single-dose J&amp;J COVID-19 vaccine in 2021 because it meant I only had to get a single dose. I have never even attempted to give blood, since the couple of times I have had blood drawn, it has been a challenge to remain conscious. I try my best to put on a brave face, but even the sight of a needle on TV makes me lightheaded.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="covid_vaccine_pic.jpg" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>My roommate and I getting our COVID-19 booster doses in late 2021</figcaption>
</figure>
</div>
<p>I completely understand the fear some people have of vaccines. Even if you can put up with the needles, which I can, its still unpleasant. Your arm hurts, you might feel off for a few days afterward. The weight-loss-drugmakers know this and are creating <a href="https://www.prnewswire.com/news-releases/novo-nordisks-wegovy-pill-the-first-and-only-oral-glp-1-for-weight-loss-in-adults-now-broadly-available-across-america-302652205.html">oral options</a>. There are some oral and nasal vaccine options, but they haven’t been developed for all diseases and the performance of the vaccine can vary a bit. So for many people, they have to overcome a real fear to get vaccinated.</p>
<p>There’s a social component too. In college, there was a flu vaccine “fair” in the main student center, which all my friend attended and where some of my friends volunteered. There was a lot of (positive) peer pressure to get vaccinated.</p>
<hr>
</section>
<section id="an-outbreak-in-new-york" class="level1">
<h1>An Outbreak in New York</h1>
<p>In July 2022, I started a new job in the Office of Science at the New York State Department of Health. Just a few days in (I was still getting my computer set up), my boss called. “We don’t know for sure yet,” he said, “but we think there is a person hospitalized with polio down state.” “Polio?” I asked, puzzled. I genuinely thought we had eliminated polio from the US. Turns out that we had, and that this case was likely imported from abroad by a traveler to another country.</p>
<p>There was no team set up to deal with a polio outbreak. So several teams across NYSDOH and CDC, including our own, got to work. My boss had a specific ask for me. Could we estimate how many people were at risk of getting polio, and how many cases might we see in New York?</p>
<p>The case and subsequent outbreak occurred in the state’s significant <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC10468811/">Haredi Jewish community</a>. While I am not Haredi myself, I grew up in the Modern Orthodox Jewish community in upstate New York. I knew plenty of religious Jews, including some who did not generally vaccinate themselves or their children. So when my boss asked how many people were at risk of getting polio, it was a question about understanding the dynamics of this community in particular.</p>
<p>This was not the first vaccine-preventable disease outbreak in this particular community (there had been <a href="https://www.nejm.org/doi/full/10.1056/NEJMoa1202865">mumps</a> and <a href="https://www.nejm.org/doi/full/10.1056/NEJMoa1912514">measles</a> within recent memory). Haredi Jews tend to have large families, so there were always young children vulnerable to these diseases being born. Each new outbreak led to a similar pattern: some parents would have their children immunized, and other children would get sick and survive with immunity, only for a new disease to show up a few years later for the cycle to repeat.</p>
<p>Following the 2018-2019 measles outbreak, the state eliminated non-medical exemptions to most vaccines for school entry. This worked, to a point. Some schools never complied, there have been occasional episodes of <a href="https://www.health.ny.gov/prevention/immunization/schools/fraud.htm">fraud</a>, and some parents just delayed vaccination until school entry, leaving their children under 5 vulnerable. There was a lot of anti-vaccine sentiment in the community.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="county_rates_map_MMR.png" class="img-fluid figure-img"></p>
<figcaption>Measles vaccination rates in <a href="https://www.health.ny.gov/diseases/communicable/measles/vaccine/">New York State</a></figcaption>
</figure>
</div>
<p>Honestly, I understood where they were coming from. There is frequent scrutiny by the <a href="https://en.wikipedia.org/wiki/New_York_Hasidic_education_controversy">state government</a> and the <a href="https://www.nytimes.com/2022/09/11/nyregion/hasidic-yeshivas-schools-new-york.html">media</a> over how Haredi Jews run their schools. So when state officials came to them begging, once again, to bring their children in for vaccines, many parents were skeptical. Many parents were young and themselves not vaccinated. It wasn’t the social norm to get vaccinated, and it certainly wasn’t the norm to trust the government, or worse, faraway doctors whose vaccines did not appear to prevent repeated outbreaks from occurring.</p>
<p>We worked hard to come up with solutions, to rebuild trust so that people would choose to vaccinate their children. But ultimately it was a problem that took years to create, and one that will take years to solve.</p>
<hr>
</section>
<section id="what-to-do" class="level1">
<h1>What to do?</h1>
<p>Fast forward to 2026, and obviously we have not solved this problem. Distrust in vaccines, and in public health in general, is higher than ever. HHS, led by RFK Jr., has removed some <a href="https://www.npr.org/sections/shots-health-news/2026/01/09/nx-s1-5671750/cdc-childhood-vaccines-universal-recommendation-rotavirus-hepatitis">vaccine recommendations</a>, and his handpicked leader of ACIP has questioned the need for <a href="https://www.reuters.com/business/healthcare-pharmaceuticals/us-vaccine-panel-head-questions-polio-recommendation-2026-01-23/">polio and measles vaccines</a> entirely.</p>
<p>Vaccine acceptance can be thought of as a spectrum or <a href="https://julieleask.wordpress.com/2015/05/12/improving-communication-about-vaccination-sarah/#:~:text=SARAH%20is%20designed%20like%20a,the%20provision%20of%20tailored%20information.">pyramid</a>. At the bottom are those who receive all recommended doses. Then there are smaller segments of people that are hesitant or selective. They may get some vaccines, but maybe not all on the recommended schedule. At the top, the smallest group of people, are the decliners who receive no vaccines under any circumstances.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="vaccine_pyramid.jpg" class="img-fluid figure-img"></p>
<figcaption>The vaccine pyramid</figcaption>
</figure>
</div>
<p>Recently Dr.&nbsp;Paul Offit called RFK Jr.&nbsp;a <a href="https://www.nytimes.com/2025/01/13/opinion/rfk-jr-is-a-vaccine-cynic.html">“vaccine cynic”</a> which I agree is a much better term for him than “skeptic.” Skepticism is normal, and a healthy part of the scientific process. We should be skeptical of new vaccines and medical treatments, and carefully scrutinize the evidence when deciding whether to use them. That is just what scientists, doctors, and regular people all over the country have done for decades. I think that is what most people do who are hesitant or selective about vaccines. RFK Jr.&nbsp;and his supporters in the government are not like that. They contort evidence to fit their preconceived conclusions, a complete inversion of the scientific method.</p>
<p>I have a lot of empathy for those unsure about vaccines. Needles are scary. We don’t always feel we can trust what scientists and government officials are saying. I completely understand how someone might hear that vaccines don’t work or are unsafe and simply decide that its not worth it for them that day. I hope they can be persuaded otherwise one day.</p>
<p>I have a harder time understanding the vaccine cynic position. For me, its hard to understand why RFK Jr.&nbsp;is so opposed to vaccines, and why so many people find that view appealing. For a public health communications class, I recently read an article about <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2973067">“identity protection cognition”</a>: basically the idea that people’s beliefs are downstream of their group identity. I think that is at least part of the answer, and something that effects us all. The author, Dan Kahan, also points out that those with the most scientific knowledge are often the most polarized. As someone with a good amount of scientific knowledge myself, I don’t want to fall into that trap. One fear I have about the public health field today is that we risk becoming so (reasonably!) angry by attacks on science that we risk losing our empathy for those who don’t share our views. Empathy which is non-negotiable in public health.</p>
<p>For my own part, I am interested in understanding why people choose not to vaccinate and how they can be persuaded to do so. I am far from an expert on this (and I’m sure this post violates some “best practices” in that area), but I hope to lead with empathy and transparency in the work that I do.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>